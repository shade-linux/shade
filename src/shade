#!/usr/bin/env bash

if [[ $EUID -ne 0 ]]; then
    echo 'Shade must be run as a root user'
    exit 1
fi

function help() {
    cat <<EOF
Usage: shade [OPTION] [...]

Options:
    -h, --help    Show this text
EOF
    
}

function setup() {
    rm -r /usr/local/shade/cache/ > /dev/null 2>&1
    mkdir /usr/local/shade/ > /dev/null 2>&1
    mkdir /usr/local/shade/log/ > /dev/null 2>&1
    mkdir /usr/local/shade/cache/ > /dev/null 2>&1
    git clone https://github.com/shade-linux/buildscripts/ /usr/local/shade/cache/
}

function install() {
    for pack in ${@:2:9999}; do
        bash /usr/local/shade/cache/packages/${pack}/package
    done
}

case "$1" in

    -h) help ;;
    --help) help ;;
    
    -s) setup ;;
    --setup) setup ;;

    -i) install $@ ;;
    --install) install $@ ;;

esac
